function calculateResults() {
    const resultContainer = document.getElementById('result-container');
    resultContainer.innerHTML = ''; // Clear previous results

    // Define variables
    const rental = parseFloat(document.getElementById('rental1').value);
    const interest_rate = parseFloat(document.getElementById('interest_rate1').value) / 100 / 12;
    const nper = parseInt(document.getElementById('nper1').value);

    if (rental && interest_rate && nper) {
        let npv = 0;
        let npvValues = []; // Array to store NPV values over time
        let cbrValues = []; // Array to store CBR values over time

        // Calculate the NPV for all periods
        for (let t = 1; t <= nper; t++) {
            npv += rental / Math.pow(1 + interest_rate, t);
            npvValues.push(npv);
            cbrValues.push(rental * t);
        }

        const resultElement = document.createElement('div');
        resultElement.classList.add('result');
        resultElement.innerText = `Final NPV: $${npv.toFixed(2)}, Final CBR: $${cbrValues[cbrValues.length - 1].toFixed(2)}`;
        resultContainer.appendChild(resultElement);

        // Create labels for the chart (1, 2, 3, ..., nper)
        const labels = Array.from({ length: nper }, (_, i) => i + 1);

        // Update chart
        updateChart(labels, npvValues, cbrValues);
    }
}
